<div class="row">
  <div class="col-md-3">
    <app-vnavbar></app-vnavbar>
  </div>

  <main role="main" class="col-md-9">
    <h2 class="text-center">Booked Items</h2>
    <br>
    <div class="dropdown">
      <button class="btn btn-outline-info btn-sm  dropdown-toggle" href="#"
              role="button" id="dropdownMenuLink" data-toggle="dropdown"
              aria-haspopup="true" aria-expanded="false" type="button"
              [disabled]="wishlist.items.length <= 1">
        Sort by:
      </button>

      <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
        <a class="dropdown-item" (click)="sortItems('name')">Name</a>
        <a class="dropdown-item" (click)="sortItems('priority')">Priority</a>
        <a class="dropdown-item" (click)="sortItems('dueDate')">Due date</a>
      </div>
    </div>


    <div class="row">
      <div class="col-4">
        <div class="list-group" id="list-tab" role="tablist">
          <a *ngFor="let itemDto of wishlist.items | sortingItems:path:order; let i = index;"
             class="list-group-item list-group-item-action"
             id="list-home-list"
             data-toggle="list" href="#list{{i}}" role="tab"
             aria-controls="home">

            <li class="d-flex flex-row-reverse justify-content-between align-items-center">

              <div class="select-style"
                   [style.background-color]="
                    itemDto.priority === 1 ? '#d14242':
                    itemDto.priority === 2 ? 'green':'gray'">


                <select (change)="hasChanges = true">

                  <option value="1" (click)="itemDto.priority = 1">High</option>
                  <option value="2" (click)="itemDto.priority = 2">Avg</option>
                  <option value="3" (click)="itemDto.priority = 3">Low</option>
                </select>

              </div>

              {{itemDto.item.name}}

            </li>
          </a>

        </div>
      </div>

      <div class="col-8 card">
        <div class="tab-content" id="nav-tabContent">
          <div *ngFor="let itemDto of wishlist.items; let i = index;"
               class="tab-pane fade show"
               id="list{{i}}"
               role="tabpanel"
               aria-labelledby="list-home-list">

            <div class="card-body">

              <img class="card-img-top"
                   *ngIf="!itemDto.item.image"
                   src="https://renderman.pixar.com/assets/camaleon_cms/image-not-found-4a963b95bf081c3ea02923dceaeb3f8085e1a654fc54840aac61a57a60903fef.png"
                   alt="Card image">

              <img class="card-img-top"
                   *ngIf="itemDto.item.image"
                   src="itemDto.item.image" alt="Card image">

              <h5 class="card-title"> {{itemDto.item.name}}</h5>
              <h6 class="card-subtitle mb-2 text-muted">{{itemDto.item.dueDate}}</h6>
              <p class="card-text">{{itemDto.item.description}}</p>

              <a *ngIf="itemDto.item.link"
                 href="{{itemDto.item.link}}"
                 class="card-link">link</a>

            </div>

            <div class="card-footer">

              <small class="text-muted">
                <a href="event/{{itemDto.event_id}}" class="card-link">Go to event: {{itemDto.event_id}}</a>
              </small>

            </div>
          </div>
        </div>
      </div>
    </div>


    <button type="button" class="btn btn-secondary" [disabled]="!hasChanges" (click)="update()">
      Save changes
    </button>

  </main>
</div>
